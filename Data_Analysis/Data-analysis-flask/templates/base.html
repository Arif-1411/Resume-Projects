<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>{% block title %}DA Portfolio{% endblock %}</title>
  <style>
    * { box-sizing: border-box; margin: 0; padding: 0; }
    body { font-family: Arial, sans-serif; background: #f0f2f5; color: #222; }

    /* NAV */
    nav { background: #1a1a2e; padding: 0 20px; display: flex; align-items: center; flex-wrap: wrap; gap: 4px; min-height: 52px; }
    nav .brand { color: #e94560; font-weight: bold; font-size: 1rem; margin-right: 16px; text-decoration: none; }
    nav a { color: #aaa; text-decoration: none; padding: 6px 12px; border-radius: 4px; font-size: 0.82rem; }
    nav a:hover, nav a.active { background: #e94560; color: #fff; }

    /* LAYOUT */
    .page { max-width: 1050px; margin: 30px auto; padding: 0 16px; }

    /* CARD */
    .card { background: #fff; border: 1px solid #ddd; border-radius: 6px; padding: 22px; margin-bottom: 20px; }
    .card h2 { font-size: 1.1rem; color: #1a1a2e; border-left: 4px solid #e94560; padding-left: 10px; margin-bottom: 16px; }
    .card h3 { font-size: 0.95rem; color: #333; margin: 14px 0 8px; }

    /* CONCEPT BOX */
    .concept { background: #fff8e1; border: 1px solid #ffe082; border-radius: 4px; padding: 10px 14px; margin-bottom: 18px; font-size: 0.88rem; line-height: 1.6; }

    /* INPUTS */
    label { display: block; font-size: 0.82rem; font-weight: bold; color: #555; margin-bottom: 3px; }
    input[type="text"], input[type="number"], select {
      width: 100%; padding: 7px 10px; border: 1px solid #ccc; border-radius: 4px;
      font-size: 0.88rem; background: #fff;
    }
    input:focus, select:focus { outline: none; border-color: #e94560; }
    .row { display: flex; gap: 12px; flex-wrap: wrap; }
    .row > div { flex: 1; min-width: 150px; }

    /* BUTTONS */
    button { padding: 8px 20px; background: #e94560; color: #fff; border: none; border-radius: 4px; cursor: pointer; font-size: 0.88rem; }
    button:hover { background: #c73652; }
    .btn-outline { background: transparent; color: #e94560; border: 1px solid #e94560; }
    .btn-outline:hover { background: #e94560; color: #fff; }
    .btn-row { display: flex; gap: 8px; flex-wrap: wrap; margin-top: 12px; }

    /* RESULTS */
    .result-box { background: #f8f9fa; border: 1px solid #dee2e6; border-left: 4px solid #e94560; border-radius: 4px; padding: 14px; margin-top: 14px; font-size: 0.88rem; }
    .result-box.hidden { display: none; }

    /* STAT GRID */
    .stat-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(130px,1fr)); gap: 10px; margin-top: 10px; }
    .stat-item { background: #f8f9fa; border: 1px solid #ddd; border-radius: 4px; padding: 10px; text-align: center; }
    .stat-item .val { font-size: 1.3rem; font-weight: bold; color: #e94560; }
    .stat-item .lbl { font-size: 0.72rem; color: #888; margin-top: 2px; }

    /* TABLES */
    .tbl-wrap { overflow-x: auto; margin-top: 10px; }
    table { width: 100%; border-collapse: collapse; font-size: 0.82rem; }
    th { background: #1a1a2e; color: #fff; padding: 7px 10px; text-align: left; font-weight: 600; }
    td { padding: 6px 10px; border-bottom: 1px solid #eee; }
    tr:nth-child(even) td { background: #fafafa; }

    /* BADGE */
    .badge { display: inline-block; padding: 2px 8px; border-radius: 3px; font-size: 0.75rem; font-weight: 600; }
    .badge-green  { background: #d4edda; color: #155724; }
    .badge-red    { background: #f8d7da; color: #721c24; }
    .badge-blue   { background: #cce5ff; color: #004085; }
    .badge-yellow { background: #fff3cd; color: #856404; }

    /* PILLS */
    .pills { display: flex; flex-wrap: wrap; gap: 5px; margin-top: 8px; }
    .pill  { padding: 3px 10px; border-radius: 12px; font-size: 0.8rem; background: #e3f2fd; color: #1565c0; }
    .pill.red { background: #fce4ec; color: #880e4f; }
    .pill.green { background: #e8f5e9; color: #2e7d32; }

    /* BAR CHART */
    .bar-chart { margin-top: 10px; }
    .bar-row { display: flex; align-items: center; gap: 8px; margin-bottom: 5px; font-size: 0.8rem; }
    .bar-row .bar-label { min-width: 90px; text-align: right; color: #555; }
    .bar-row .bar-track { flex: 1; background: #eee; border-radius: 3px; height: 18px; }
    .bar-row .bar-fill  { height: 18px; background: #e94560; border-radius: 3px; transition: width .4s; }
    .bar-row .bar-val   { min-width: 40px; color: #333; font-weight: bold; }

    /* HEATMAP */
    .heatmap { display: inline-block; margin-top: 10px; }
    .hm-row  { display: flex; }
    .hm-cell { width: 70px; height: 50px; display: flex; align-items: center; justify-content: center; font-size: 0.78rem; font-weight: bold; }

    /* GRID */
    .grid-2 { display: grid; grid-template-columns: 1fr 1fr; gap: 16px; }
    @media(max-width:650px){ .grid-2 { grid-template-columns: 1fr; } }

    /* LOADING */
    .loading { color: #888; font-size: 0.85rem; margin-top: 8px; }

    /* CODE */
    code { background: #f1f1f1; padding: 1px 5px; border-radius: 3px; font-size: 0.82em; color: #c0392b; }
  </style>
</head>
<body>
<nav>
  <a class="brand" href="/">ðŸ“Š DA Portfolio</a>
  <a href="/numpy"    {% if request.path=='/numpy'    %}class="active"{% endif %}>01 NumPy</a>
  <a href="/pandas"   {% if request.path=='/pandas'   %}class="active"{% endif %}>02 Pandas</a>
  <a href="/cleaning" {% if request.path=='/cleaning' %}class="active"{% endif %}>03 Cleaning</a>
  <a href="/eda"      {% if request.path=='/eda'      %}class="active"{% endif %}>04 EDA</a>
  <a href="/outliers" {% if request.path=='/outliers' %}class="active"{% endif %}>05 Outliers</a>
  <a href="/wrangling"{% if request.path=='/wrangling'%}class="active"{% endif %}>06 Wrangling</a>
  <a href="/features" {% if request.path=='/features' %}class="active"{% endif %}>07 Features</a>
</nav>
<div class="page">
  {% block content %}{% endblock %}
</div>
<script>
async function post(url, body={}) {
  const r = await fetch(url, {method:'POST', headers:{'Content-Type':'application/json'}, body: JSON.stringify(body)});
  return r.json();
}
async function get(url) {
  const r = await fetch(url);
  return r.json();
}
function show(id){ document.getElementById(id).classList.remove('hidden'); }
function hide(id){ document.getElementById(id).classList.add('hidden'); }
function val(id){ return document.getElementById(id).value; }
function html(id, h){ document.getElementById(id).innerHTML = h; }

function barChart(data, labelKey, valueKey) {
  const max = Math.max(...data.map(d => d[valueKey]));
  return '<div class="bar-chart">' + data.map(d =>
    `<div class="bar-row">
      <span class="bar-label">${d[labelKey]}</span>
      <div class="bar-track"><div class="bar-fill" style="width:${Math.round(d[valueKey]/max*100)}%"></div></div>
      <span class="bar-val">${typeof d[valueKey]==='number'?d[valueKey].toLocaleString():d[valueKey]}</span>
    </div>`).join('') + '</div>';
}

function makeTable(rows, cols) {
  if (!rows || rows.length === 0) return '<em>No data</em>';
  const headers = cols || Object.keys(rows[0]);
  return `<div class="tbl-wrap"><table>
    <tr>${headers.map(h=>`<th>${h}</th>`).join('')}</tr>
    ${rows.map(r=>`<tr>${headers.map(h=>`<td>${r[h]??''}</td>`).join('')}</tr>`).join('')}
  </table></div>`;
}
</script>
{% block scripts %}{% endblock %}
</body>
</html>
